<div id="updateProfileModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{__ "Profile-My-Profile"}}</h4>
            </div>
            <form class="modal-body" id="updatePasswordForm">
                <div class="form-group">
                    <input type="text" name="firstname" id="firstname" class="form-control" placeholder="{{__ "Firstname"}}">
                </div>
                <div class="form-group">
                    <input type="text" name="surname" id="surname" class="form-control" placeholder="{{__ "Surname"}}">
                </div>
                <div class="form-group">
                    <input type="text" name="address" id="address" class="form-control" placeholder="{{__ "Address"}}">
                </div>
                <div class="form-group">
                    <input type="text" name="postalCode" id="postalCode" class="form-control" placeholder="{{__ "PostalCode"}}">
                </div>
                <div class="form-group">
                    <input type="text" name="city" id="city" class="form-control" placeholder="{{__ "City"}}">
                </div>
                <div class="form-group">
                    <input type="text" name="email" id="email" class="form-control" placeholder="{{__ "Email"}}">
                </div>
                <div class="modal-footer">
                    <button id="confirmUpdate" type="submit" class="btn btn-success" data-dismiss="modal" onclick="updateProfile()"><span class="glyphicon glyphicon-ok"></span> {{__ "Update"}}
                    </button>
                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> {{__ "Close"}}</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    function updateProfile(){
        $.post("/updateProfile", {
            firstname: $("#firstname").val(),
            surname: $("#surname").val(),
            address: $("#address").val(),
            postalCode: $("#postalCode").val(),
            city: $("#city").val(),
            email: $("#email").val()
        }).done(function (data) {
            console.log("DATA" + JSON.stringify(data));
            var retur = JSON.stringify(data);
            if (retur.length > 3) { //TODO: Fiks bedre sjekk her.
                $("#updateProfileMessage").addClass("alert-success col-md-12 text-center").removeClass("alert-danger").html("{{__ "Profile-Changed-Success"}}").css("display", "block");
            } else {
                $("#updateProfileMessage").addClass("alert-danger col-md-12 text-center").removeClass("alert-success").html("{{__ "Profile-Changed-Danger"}}").css("display", "block");
            }

            $("#updateProfileModal").on("hidden.bs.modal", function(){
                //TODO: Fiks hva som skjer n√•r modellen lukkes
            });
            setTimeout(function () {
                $("#updateProfileMessage").fadeOut("slow");
                window.location.reload(true);
            }, 2000);
        });
    }
</script>